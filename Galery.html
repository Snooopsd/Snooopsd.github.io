<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-widgth, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="./styles/GalleryPage/body_style.css">
        <link rel="stylesheet" href="./styles/GalleryPage/header_style.css">
        <link rel="stylesheet" href="./styles/GalleryPage/footer_style.css">
        <link rel="stylesheet" href="./styles/GalleryPage/main_style.css">
        <title>PupuWoo</title>
    </head>
    <body>
        <section class="header_wrap"> <!--Хэдер-->
            <header>
                <div class="logo">
                    <a href="./index.html"><img src="./images/logo.svg"></a>
                </div>
                <div class="menu-icon" id="menu-icon">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <nav>
                        <ul>
                            <li></li>
                            <li>
                                <button class="login">Логин</button>
                            </li>
                            <li>
                                <button class="register">Регистрация</button>
                            </li>
                            <li>
                                <form class="search-form">
                                    <input class="search-input" type="text" placeholder="Поиск фотографий или авторов">
                                    <button class="search-button" type="submit"></button>
                                </form>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div class="menu">
                    <div class="search">
                        <form class="search-form">
                            <input class="search-input" type="text" placeholder="Поиск фотографий или авторов">
                            <button class="search-button" type="submit"></button>
                        </form>
                    </div>
                    <div class="buttons">
                        <button class="login">Логин</button>
                        <button class="register">Регистрация</button>
                    </div>
                </div>
            </header>
        </section>
        <section> <!--Тело страницы-->
            <div class="section-name"> <!--Название раздела-->
                <h1>Галерея</h1>
            </div>
            <div class="section-photos"> <!--Тело для фоток-->
                <div class="add-button">
                    <button id="open-modal">+</button>
                </div>

                <div id="overlay"></div>

                <div id="myModal" class="modal">
                    <div class="modal-name">
                        <img src="./images/back.svg" id="back-button" alt="Назад">
                        <h1>Публикация фотографии</h1>
                    </div>
                    <div class="modal-content">
                        <div class="left-section">
                            <input type="file" id="fileInput">
                            <img id="uploadImage" alt="Загрузите фотографию" src="./images/background/BackgroundImage001.jpg">
                            <button id="uploadButton">Загрузить фотографию</button>
                        </div>
                        <div class="right-section">
                            <input type="text" id="imageTitle" placeholder="Название фотографии">
                            <button id="publishButton">Опубликовать</button>
                        </div>
                    </div>
                </div>

                <div id="look-photo-modal" class="look-modal">
                    <div class="modal-name">
                        <h2 id="modal-title">Заголовок модального окна</h2>
                    </div>
                    <div class="modal-content">
                        <div class="reactions-comments">
                            <div class="modal-image">
                                <img id="modal-image" src="" alt="Увеличенная фотография">
                            </div>
                            <div class="modal-details">
                                <div class="reactions">
                                    <h3>Реакции</h3>
                                    <p id="reaction-count">0</p>
                                    <button id="add-reaction">Добавить реакцию</button>
                                </div>
                                <div class="comments">
                                    <h3>Комментарии</h3>
                                    <ul id="comments-list">
                                        <!-- Ваши комментарии будут добавлены сюда -->
                                    </ul>
                                    <input type="text" id="comment-input" placeholder="Напишите комментарий">
                                    <button id="add-comment">Добавить комментарий</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="photo-tile" data-src="./images/photos/photo1.jpg" data-tile="Название фотографии" data-author="Автор фотографии">
                    <img src="./images/photos/photo1.jpg" alt="Фотография 1">
                    <div class="photo-details">
                        <p>Название фотографии 1</p>
                        <p>Автор: Имя Автора</p>
                    </div>
                </div>

                <div class="photo-tile" data-src="photo1.jpg" data-tile="Название фотографии" data-author="Автор фотографии">
                    <img src="./images/photos/photo2.jpg" alt="Фотография 1">
                    <div class="photo-details">
                        <p>Название фотографии 1</p>
                        <p>Автор: Имя Автора</p>
                    </div>
                </div>

                <div class="photo-tile" data-src="photo1.jpg" data-tile="Название фотографии" data-author="Автор фотографии">
                    <img src="photo1.jpg" alt="Фотография 1">
                    <div class="photo-details">
                        <p>Название фотографии 1</p>
                        <p>Автор: Имя Автора</p>
                    </div>
                </div>
            </div>
        </section>
        <section> <!--Футер-->
            <footer>
                <div class="footer-content">
                    <div class="company-info">
                        <p>Фликов ИВТ-01</p>
                        <p>Snooopsd@yandex.ru</p>
                    </div>
                    <div class="social-links">
                        <a href="https://vk.com/id81656573"><img src="./images/VK Logo.svg" alt="Вконтаке"></a>
                        <a href="https://t.me/ssfser"><img src="./images/tg logo.svg" alt="Telegram"></a>
                    </div>
                </div>
                <div class="footer-info">
                    <p>&copy; 2023, Все права защищены</p>
                </div>
            </footer>
        </section>

        <script>
            const menuIcon = document.getElementById("menu-icon");
            const nav = document.querySelector("nav");

            menuIcon.addEventListener("click", () => {
                nav.classList.toggle("active"); // Добавить или удалить класс "active" у элемента nav
            });
        </script>
        <script>
            const openButton = document.getElementById('open-modal');
            const closeButton = document.getElementById('back-button');
            const modal = document.getElementById('myModal');
            const overlay = document.getElementById('overlay');
            const fileInput = document.getElementById("fileInput");
            const uploadedImage = document.getElementById("uploadedImage");
            const imageTitle = document.getElementById("imageTitle");
            const publishButton = document.getElementById("publishButton");
            const uploadButton = document.getElementById("uploadButton");
            
            openButton.addEventListener('click', () => {
                modal.style.display = 'block';
                overlay.style.display = 'block';
            });

            closeButton.addEventListener('click', () => {
                modal.style.display = 'none';
                overlay.style.display = 'none';
            });

            overlay.addEventListener('click', () => {
                modal.style.display = 'none';
                overlay.style.display = 'none';
            });

            // Обработчик нажатия кнопки "Загрузить фотографию"
            uploadButton.addEventListener("click", openModal);

            // Обработчик выбора файла
            fileInput.addEventListener("change", function() {
                const file = fileInput.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadedImage.src = e.target.result;
                        uploadedImage.style.display = "block";
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Обработчик нажатия кнопки "Опубликовать"
            publishButton.addEventListener("click", function() {
                const title = imageTitle.value;
                // Здесь можно обработать данные и отправить на сервер, если необходимо
                // Затем можно закрыть модальное окно
                closeModal();
            });
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const photoTiles = document.querySelectorAll(".photo-tile");
                photoTiles.forEach((tile) => {
                    tile.addEventListener("click", () => {
                        // Получите данные из атрибутов data-*
                        const src = tile.getAttribute("data-src");
                        const title = tile.getAttribute("data-title");
                        const author = tile.getAttribute("data-author");

                        // Получите элементы модального окна
                        const modal = document.getElementById("look-photo-modal");
                        const modalTitle = document.getElementById("modal-title");
                        const modalImage = document.getElementById("modal-image");
                        const overlay = document.getElementById("overlay");

                        // Установите заголовок модального окна
                        modalTitle.textContent = title + author;

                        // Установите изображение модального окна
                        modalImage.src = src;

                        // Показать модальное окно
                        overlay.style.display = "block";
                        modal.style.display = "block";
                    });
                });

                let reactionCount = 0;

                // Обработчик события для добавления реакции
                const addReactionButton = document.getElementById("add-reaction");
                const reactionCountElement = document.getElementById("reaction-count");

                addReactionButton.addEventListener("click", () => {
                    if (addReactionButton.classList.contains("active")) {
                        // Если кнопка имеет класс "active", уменьшите счетчик на 1 и удалите класс     
                        reactionCountElement++;
                        addReactionButton.classList.remove("active");
                    } else {
                        // В противном случае, увеличьте счетчик на 1 и добавьте класс
                        reactionCountElement++; 
                        addReactionButton.classList.add("active");
                    }

                    // Обновите отображаемое количество реакций
                    reactionCount.textContent = reactionCountElement;
                });

                // Обработчик события для закрытия модального окна
                overlay.addEventListener("click", () => {
                    const modal = document.getElementById("look-photo-modal");
                    modal.style.display = "none";
                    overlay.style.display = "none";
                });
            });
        </script>
    </body>
</html>